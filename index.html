<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rationality NRTS Faction Message Service</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        // Check if the visitor came from the password-protected site
        if (!document.referrer.includes('goobismoobis.github.io/RFA')) {
            // If they didn't come from the password page, redirect them to it
            window.location.href = 'https://goobismoobis.github.io/RFA';
        }
    </script>
    
    <!-- Import Firebase -->
<script type="module" src="module.js"></script>
</head>
<body>
    <!-- [Previous HTML remains the same until the script tag] -->
    <div class="message-form">
        <div class="username-section active" id="usernameSection">
            <h2>Choose Your Username</h2>
            <div class="username-row">
                <div class="username-input-container">
                    <input type="text" id="username" placeholder="Your username" required>
                </div>
                <div class="color-picker-container">
                    <label for="nameColor">Color:</label>
                    <div class="color-picker-button">
                        <img src="https://www.pngkey.com/png/full/183-1837096_fill-color-tool-graphic-bucket-paint-drop-comments.png" alt="Color picker">
                        <input type="color" id="nameColor" value="#4CAF50">
                    </div>
                </div>
            </div>
            <button onclick="setUsername()">Set Username</button>
        </div>

        <div class="message-section" id="messageSection">
            <div class="form-header">
                <h2>Post a Message</h2>
                <div class="color-picker">
                    <span>Posting as: </span>
                    <span id="currentUsername" class="username"></span>
                </div>
            </div>
            <textarea id="message" placeholder="Your message" required></textarea>
            <button onclick="postMessage()">Send Message</button>
        </div>
    </div>

    <div id="messages"></div>
    <button id="deleteAccount" onclick="showDeleteModal()">Delete Account</button>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <button class="close-button" onclick="hideDeleteModal()">&times;</button>
            <h2>Are you sure you want to delete your account?</h2>
            <div class="modal-buttons">
                <button class="delete-button" onclick="deleteAccount()">Delete Account</button>
                <button class="clear-data-button" onclick="clearAllData()">Clear Website Data</button>
            </div>
        </div>
    </div>

    <script src="main.js">
</body>
</html>
